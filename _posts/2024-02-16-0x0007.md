# 기초 수학과 암호학

컴퓨터에서 기본적이면서, 수학적인 사고를 할 수 있게 해주는 학문  
이지만..  

눈이 빙글돌고, 뇌가 비명을 지르는 수업이다.  
암호학. 이름도 참 잘 지었다. 암...호출

이산수학은 연속적이지 않고 떨어져 흩어진 수를 이용한 연산을 한다고 한다.  
연속적이지 않고? 떨어져 흩어진 수?  
무슨 말이지?  
인터넷을 찾아도 애매한 개념이다.  
그냥 정수로 연산을 한다는 정도 이해하고 넘어가야할 거 같다.  

명제 부분에서 기억할만 한 건,  
부정(not)을 표현하는 기호가 ~P, !P 같이 물결표와 느낌표 정도있다는 부분이다.

논리곱 AND는 둘 다 참 일때만 "참(1)"  
논리합 OR은 하나만 참이어도 "참"
배타적 논리합 XOR은 서로 다를 때 "참"  
으로 특히 XOR은 연산을 했을 때 결과에서 0과 1이 1:1의 비율로 나온다는 점과  
이를 활용해 암호학에서 주로 이용된다.

집합을 표현 하는 방법에 대표적으로  
원소나열법, 조건제시법, 벤 다이어그램이 있다.

기수 : 유한집합 A가 갖는 원소의 개수  
표현은 |A| 또는 n(A)로 한다.

함수라고 불리려면 어떤 조건을 만족해야하는가?  
ㅡ정의역의 원소들이 모두 딱 한번씩만 대응해야한다.

행렬은 곱하기를 할 때 교환법칙이 성립하지 않는다.

2진 연산?  
ㅡ두 개의 입력 값에 대해 하나의 결과 값 생성  
ㅡ두 개의 입력 값은 정수 집합에서 선택하며, 결과 값도 정수 집합의 원소

유클리드 알고리즘  
이 부분은 개인적으로 알고 있으면 유용한 방법이라 생각했다.  
최대 공약수를 구하는데 활용된다.  
영어로는 Greatest Common Divisor 줄여서 gcd라 하며,  
gcd(a,b)=1이면, a와 b는 서로 소이다.

q | r1 | r2 | r
2  280   96   88  
1   96   88   8  
11  88   8    0  
    8    0  
280과 96의 최대공약수를 구하는 과정이다.
q는 몫, r은 나머지로 한 칸씩 내려올 때 대각선으로 숫자를 옮겨적으면 된다.  
나누어 떨어지는 지점, 즉, r2에 들어가는 값이 0이 될 때, r1의 값이 최대공약수이다.  
위의 경우는 8임을 알 수 있다.

확장 유클리드 알고리즘은 As+Bt=gcd(A,B)를 만족하는 정수 s,t를 구하는 알고리즘이다.  
뒤에서 역원을 구할 때, 숙지해야할 내용이다.

모듈러 연산은 나머지를 구하는 방법으로  
a mod n = r 로 표현한다.  

잉여류 Zn이라는 표현은 모듈러 연산과 관련이 있다.  

항등원 : 연산을 진행했을 때, 값이 바뀌지 않게 하는 값  
ex> a + ? = a / ? = 0, 덧셈에 대한 항등원은 0이고, 곱셈은 1이다.  
역원 : 연산을 진행했을 때, 결과값이 항등원이 나오게 하는 값
ex> 3의 덧셈에 대한 역원은? -3 / 3의 곱셈에 대한 역원은? 1/3

Zn에서 a가 곱셈에 대한 역원을 갖기 위한 필요충분조건은 gcd(n,a)=1 이다.

군이란 무엇인가?  
네 가지 성질을 만족해야 한다.  
1.닫혀있는가? 연산한 값이 해당 군 안에 있는 지 여부이다.
2.결합 법칙이 성립하는가? a,b,c를 연산한다고 했을 때, 가로로 묶는 위치에 상관없이 결과값이 일치하는 지 확인해야한다.  
3.항등원이 존재하는가?  
4.역원이 존재하는가?  
이를 만족시키면서, 교환법칙까지 만족하면 아벨 군 혹은 가환 군이라 불린다.  
<\G,*>식으로 표기한다.

환은 무엇인가?
<\G,*,&>처럼 군이 만족한 경우에 추가적으로 두가지 성질을 만족한다.  
두번째 연산이 결합법칙을 만족해야하고, 분배법칙 또한 만족해야한다.  
가환 환은? 군과 마찬가지로 교환법칙을 만족하는 경우이다.

체는 가환 환에서 한 단계 더 나아간 형태이다.
체에 해당하는 경우는, 덧셈/뺄셈, 곱셈/나눗셈 연산의 두 쌍들을 이용할 수 있는 구조이다.

## 암호학
먼저, 기본적인 용어를 알아야한다.  
평문(P, plaintext), 암호문(C, ciphertext), 암호화(E, encryotion), 복호화(D, decryption)  
암호해독은 키를 갖지 않고 본래의 평문이나 키를 얻는 과정이다.

암호의 원리에서  
치환(Substitution)은 문자를 다른 문자로 바꾸는 행위이고,  
전치(Permutation)은 문자의 배치 순서를 바꾸는 행위이다.

암호알고리즘은 비밀인가?  
좋은 암호라는 건, 암호알고리즘을 알지 못하는게 아닌, 암호화키에 대한 기밀성이 잘 유지되는 암호이다.  
또한, 공격자가 시간 내에 암호를 못 풀거나, 암호를 풀어서 얻는 이득보다 들어가는 노력이나 비용이 클 때, 좋은 암호라 할 수 있다.

암호 알고리즘은 크게 세 가지로 구분할 수 있다.  
대칭키 알고리즘, 비대칭키 알고리즘, 해시함수가 그것이다.  
대칭키는 이름에서 알 수 있듯이 암호화 키와 복호화 키가 같음을 의미한다.  
비대칭키는 위와 반대되는 경우로, 대칭키가 중간자 공격에 취약하기에 보안성을 강조하기 위해 등장했다.  
해시 함수는 대칭키, 비대칭키와 달리 단방향 암호 알고리즘이다.  
복호화? 안된다. 대신 동일한 값에 대해 동일한 해시값을 가지고 있기 때문에  
무결성을 체크할 때 사용된다.  

암호 해독 공격에는 다섯 가지 형태가 있다.
암호문 단독 공격, 알려진 평문 공격, 선택 평문 공격, 선택 암호문 공격, 선택 원문 공격이다.  
정보보안기사 교재에는 선택 원문 공격에 대한 내용은 없었다.

암호학을 공부할수록 들었던 가장 큰 생각은  
누군가를 골탕먹이고 싶다면 꼭! 암호화해서 말하고자 하는 바를 말하는 것이다.
고전 암호 중에 Rail Fence cipher와 카이사르 암호화를 이용하면 재미있겠다.
아니 한국어로 전하고자 하는 바를 적는데, 한글로 생각하고 적되 자판은 영어로 하고 여기서 카이사르로 한 번 암호화시키면 아마 암호를 못 풀 것이다ㅋ  
카이사르 암호는 알파벳을 일정거리 밀어서 다른 알파벳으로 치환하는 방법이다.

고전암호와 근현대암호는 무엇으로 나뉘는가? 기계의 발명이다.  
근대암호와 현대암호는 무엇으로 나뉘는가? 단위의 차이이다.  
근대암호는 알파벳을 사용하고, 현대암호는 0과 1의 비트를 사용한다.

현대암호에서 양방향-대칭키-블록암호는 페이스텔 구조의 DES와 SPN 구조의 AES로 나뉜다.  
DES(Data Encryption Standard)이고 이를 업그레이드한 버전이 AES(Advanced Encryption Standard)이다.  
블록과 실제 사용되는 비트의 수, 키에 사용되는 비트 수, 그리고 라운드 수를 암기하고 있어야 하며, 알고리즘의 구조를 이해해야 한다.

대칭키 알고리즘에서 스트림 암호의 특징은 블록암호보다 속도가 빠르다.  
암호문 생성자와 수진자 모두 동일한 비밀키와 난수 발생기의 초기상태를 공유해야한다.  
무선통신에 주로 사용된다 정도.

비대칭키는 공개키와 개인키가 암호화 복호화 과정에 따로 사용된다.  
수학적 난제를 이용하고 있다.  

먼저 블록암호부터 살펴보자.  
페이스텔 구조는 무엇인가?  
개미와 배짱이를 떠올리면 하나는 일을 엄청하고, 다른 하나는 팽팽 놀고 있다.
64비트 블록으로 구성된 평문은 왼쪽 32비트, 오른쪽 32비트로 나뉘어진다.  
그리고 Mixer와 Swapper 매커니즘을 수행하는데,  
Mixer에 해당하는 부분은 오른쪽에서 떨어져 나온 32비트가 확장 P-box를 거쳐 48비트가 되고, 48비트인 라운드 키와 XOR연산을 한다.  
축소 S-box를 거쳐 48비트가 32비트로 변하는데, 이 S-box의 구성은 8개로 각각 6비트씩 들어갔다가 4비트가 되어 나오고 4비트가 8개라 32비트이다.
그리고 단순 P-box에서 또 한 번의 전치과정을 거친다.  
이 일련의 과정을 거친 우측의 32비트는 좌측의 32비트와 XOR연산을 한다.  
여기까지 Mixer 과정이고, Swapper 과정에서는 아무런 연산을 거치지 않은 상태의 우측 32비트와 모든 연산과정을 거친 왼쪽에 형성된 32비트가 좌우의 자리를 바꾼다.  
그래서 왼쪽 부분은 온갖연산이 일어나 바쁘고, 오른쪽은 그대로 쭉 내려가기 때문에 한가하다고 볼 수 있다.  
암호화 키도 나름의 과정은 거치게 되는데, 64비트 상태에서 패리티 비트 8개를 빼고 56비트 상태에서 반반 나눈다.  
이 각각의 28비트는 축소 P-box를 거치면서 48비트가 된다.  
그리고 이 라운트 키가 Mixer 과정에서 XOR연산에 참여한다.  
DES의 대표적인 암호로는 Lucifer가 있다.

그러던 어느 날, DES가 깨지게 된다.  
이에 새로운 암호를 필요한 이들이 부랴부랴  
이중DES, 삼중DES라는 대안을 내놓았지만,  
새롭게 공모된 AES 중 Rijndael이라는 암호시스템이 주류로 자리잡게 된다.  

AES는 SPN 구조를 따른다.  
영어로는 Substitution-Permutation Network 이다.  
블록의 크기는 128비트, 192비트, 256비트가 있으며,  
라운드 횟수는 10회, 12회, 14회이다.  
한 라운드는 ByteSub-ShiftRow-MixColumn-KeyXOR 4가지로 구성되며,  
마지막 라운드는 MixColumn이 빠진 세과정만 진행된다.  
각 라운드의 첫 글자만 따서 B-S-M-K로 외우면 되겠다.  

블록 운영모드에는  
ECB(Electronic Codebook), CBC(Cipher-Block Chaining)과 같은 일반적인 운영모드,
CFB(Cipher FeedBack), OFB(Output FeedBack), CTR(CounTeR)과 같은 스트림 암호로 변환되는 운영모드가 있다.  
이 각각의 모드들은 그려보고, 암호문에서 오류가 생기고 이를 복호화할 때 오류증식이 일어나는 정도를 알아야한다.  

디피 헬만 키 합의는 특정 수학의 과정을 이용한 결과값을 A와 B가 공유하고,  
이를 통해 공통의 K(key)를 얻는 방법을 말한다.  

비대칭키의 대표로는 RSA, Elgamal, ECC가 있는데,  
RSA 소인수분해라는 수학적 난제를 이용한 방식으로,  
n=p*q에서 평문(P)값과 p, q, 공개키 값을 아는 상황에서 예제를 하나 풀어보면 이해가 편해진다.  
Elgamal은 RSA에 비해 보안성은 높으나, 메모리가 많이 필요하고 전송 속도가 느리다는 특성을 가지고 있다.  
ECC(Elliptic Curve Cryptosystem)으로 타원곡선암호라 한다.  
짧은 키를 사용하여 RSA, Elgamal보다 효율적이다.  

Kisec 2주차 류형근 선생님을 통해 배운 내용을 어설프게라도 정리해봤다.  